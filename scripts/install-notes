sudo rm -rf /usr/lib/python2.7/site-packages/backports.ssl_match_hostname-3.*
sudo yum install python-backports-ssl_match_hostname
sudo yum update

#Only on Citi enviornments running python-2.7.5-79. This is a dependency for python-2.7.5-77.
sudo rpm -i --force dependencies/rpms/python-devel-2.7.5-77.el7_6.x86_64.rpm --nosignature --nodeps

yum groupinstall "Development tools" -y

git clone https:/github.com/ceph/s3-tests
cd s3-tests
git checkout b3d9487f14ca1b3725ef9f5aa1570fa871f4f910

virtualenv/bin/pip install --download dependencies/pip setuptools
virtualenv/bin/pip download nose-blacklist -d dependencies/pip
virtualenv/bin/pip install nose-blacklist --find-links dependencies/pip

yum install --downloadonly --downloaddir=./ python-virtualenv
virtualenv/bin/pip install nose-picker -d dependencies/pip
virtualenv/bin/pip install virtualenv -d dependencies/pip
./virtualenv/bin/pip install --no-index --find-links="dependencies/pip/" -r requirements.txt

yum install dependencies/rpms/*
virtualenv --no-site-packages --distribute virtualenv
./virtualenv/bin/pip install --no-index --find-links="dependencies/pip/" -r requirements.txt
./virtualenv/bin/python setup.py develop

tar -xzvf libevent-1.4.14b-stable.tar.gz
cd libevent-1.4.14b-stable
./configure
make
sudo make install
